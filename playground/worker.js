!function(o){"function"==typeof define&&define.amd?define(o):o()}(function(){"use strict";var t,e,r,i=(t=console.log,e=['font-family: "Microsoft YaHei", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";',"color:white;","font-size:12px;","maring:5px 0;","background:yellowgreen;"],r=["color:black;","font-size:12px;"],function(o,n){t.call(t,"%c "+o+" %c "+n,e.join(""),r.join(""))}),o=(n.prototype.add=function(t,e){this.transactionList.push(function(o){var n=o.transaction([t],"readwrite").objectStore(t).add(e);n.onsuccess=function(o){console.log("数据写入成功")},n.onerror=function(o){console.warn(o),console.log("数据写入失败")}})},n.prototype.read=function(n){this.transactionList.push(function(o){o.transaction([n]).objectStore(n).openCursor().onsuccess=function(o){var n=o.target.result;n?(console.log(n.value),n.continue()):console.log("没有更多数据了！")}})},new n("monitor"));function n(o,n){void 0===n&&(n=1);var t=this,e=indexedDB.open(o,n);this.transactionList=[],e.onerror=function(){i("[ MonitorSDK ]","数据库打开报错")},e.onsuccess=function(){i("[ MonitorSDK ]","数据库打开成功"),t.transactionList.forEach(function(o){return o(e.result)})},e.onupgradeneeded=function(o){var n=o.target.result;n.objectStoreNames.contains("error")||n.createObjectStore("error",{keyPath:"trackId",autoIncrement:!0})}}console.log(o)});
